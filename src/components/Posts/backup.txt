import { Component } from "react";
import { connect } from "react-redux";
import { Link } from "react-router-dom";
import { bindActionCreators } from 'redux';

import { 
    createPostAction, 
    getPostsAction 
} from '../../store/actions/PostActions';

class Posts extends Component {
    onCreatePost(){
        this.props.createPostAction();
    }

    componentDidMount() {
        this.props.getPostsAction();
    }

    render() {
        const posts = [];

        for (let post of this.props.posts){
            posts.push(
                <div
                    key={post.id}
                    className='shadowborder p-3 mx-3 mt-3 w-1/3'
                >
                    <div>{post.title}</div>
                    <div>{post.description}</div>
                </div>    
            )
        }

        return(
        <div>
            <h2 className="bolder text-lg"> Posts</h2>
            <Link to='createpost' className="bg-red-300 px-3 py-2"
            >
                Create Post
            </Link>               
            <hr />
            <div className='flex'>{posts}</div>

        </div>
        );
    }
}

const mapStateToProps = (state) => {
    return {
        posts: state.posts,
    };
};

const mapDispatchToProps = (dispatch) => {
    return bindActionCreators(
        { createPostAction, getPostsAction }, 
        dispatch,
    );
};

export default connect(mapStateToProps, mapDispatchToProps) (Posts); 


----------------------------------------------------------------------------------



import { Component } from "react";
import { connect } from "react-redux";

import { bindActionCreators } from 'redux';

import { createEventAction, getEventsAction} from '../store/actions/EventsActions' 

class Events extends Component {
    onCreateEvent(){
        this.props.createEventAction();
    }
    
    /*componentDidMount() {
        this.props.getEventsAction();
    }*/

    render() {
        const events = [];

        for (let event of this.props.events){
            events.push(
                <div
                    key={event.id}
                    className='shadowborder p-3 mx-3 mt-3 w-1/3'
                >
                    <div>{event.title}</div>
                    <div>{event.description}</div>
                    <div>{event.username}</div>
                    <div>{event.date}</div>
                </div>    
            )
        }

        return(
        <div>
            <h2 className="bolder text-lg"> events</h2>
            <button className="bg-red-300 px-3 py-2"
                onClick={this.onCreateEvent.bind(this)}
            >
                Create Post
            </button>               
            <hr />
            <div className='flex'>{events}</div>

        </div>
        );
    }
}

const mapStateToProps = (state) => {
    return {
        events: state.events,
    };
};

const mapDispatchToProps = (dispatch) => {
    return bindActionCreators(
        { createEventAction, getEventsAction }, 
        dispatch,
    );
};

export default connect(mapStateToProps, mapDispatchToProps) (Events); 